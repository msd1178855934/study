<view catchtap="onTapImpression" class="impression-content {{impressionCustomTheme?impressionCustomTheme:''}}" data-commentid="{{renderData.commentId}}" data-index="{{impressionDataIndex}}">
    <view class="impression-header">
        <view catchtap="bindtapToUserProfile" class="author impression-author" data-contact="{{renderData.contact}}">
            <image class="author-avatar" mode="aspectFill" src="{{renderData.contact.headImgUrl}}"></image>
            <view class="author-nickname {{renderData.contact.isNameLenRestrict?'author-nickname--restricted':''}}">{{renderData.contact.baseName}}</view>
            <view class="author-extra-label" wx:if="{{renderData.contact.nameExtra}}">{{renderData.contact.nameExtra}}</view>
        </view>
        <view class="impression-time" wx:if="{{renderData.timeString}}">{{renderData.timeString}}</view>
    </view>
    <view class="formatted-image-layout" wx:if="{{renderData.commentInfo.displayMediaList.length>=1}}">
        <view class="formatted-image-row" style="height: {{picItem.maxHeight}}rpx;" wx:for="{{renderData.commentInfo.displayMediaList}}" wx:for-index="picItemIndex" wx:for-item="picItem" wx:key="picItemIndex">
            <view bindtap="bindTapLocateMedia" class="media-item" data-media="{{picList}}" wx:for="{{picItem.picLists}}" wx:for-index="picIndex" wx:for-item="picList" wx:key="picIndex">
                <view style="border-radius: 8rpx; margin-bottom: {{picList.marginBottom?picList.marginBottom+'rpx':'0'}}; margin-right: {{picList.marginRight?picList.marginRight+'rpx':'0'}}" wx:if="{{picList.type===1&&picList.isFirstVideo}}">
                    <video-preview media="{{picList}}" videoId="video-{{impressionDataIndex}}" videoStyle="{{picList.videoStyle}}"></video-preview>
                </view>
                <image-loader media="{{picList}}" wx:else></image-loader>
            </view>
        </view>
        <view class="hint--no-display" wx:if="{{renderData.commentInfo.notDisplayMediaCount>0}}">
            <view class="hint--no-display-number">
                +{{renderData.commentInfo.notDisplayMediaCount}}
            </view>
        </view>
    </view>
    <comment-text bindshowall="toggleComment16483KvReport" content="{{renderData.commentInfo.text}}" wx:if="{{renderData.commentInfo.text&&renderData.commentInfo.text.length>0}}"></comment-text>
    <poi-card bindshareshake="bindshareshake" catchtap="onTapPoi" impressionId="{{renderData.commentId}}" isUsingRealCurrentLocation="{{renderData.isUsingRealCurrentLocation}}" poiData="{{renderData.poiInfo}}" reportData="{{renderData.reportData}}" showPoiGallery="{{renderData.commentInfo.mediaList.length===0}}"></poi-card>
    <view class="poi-card-seperator">
        <view class="ps-before"></view>
    </view>
    <view catchtap="noop" class="impression-content__middle">
        <view style="min-width: 120rpx">
            <like catchlikechange="bindlikechange" commentId="{{renderData.commentId}}" data-index="{{impressionIndex}}" isLike="{{renderData.commentInfo.isLike}}" likeCount="{{renderData.commentInfo.likeCount}}" reportData="{{renderData.reportData}}"></like>
        </view>
        <view catchtap="bindtapShowCommentPanel" class="comment-wrap">
            <view class="comment-action">
                <view class="comment-icon"></view>
                <view class="comment-label">{{renderData.commentInfo.subCommentCount||' '}}</view>
            </view>
        </view>
        <share-to-wechat class="share-to-wechat-frame" impressionData="{{renderData.originComment}}" isShareShake="{{isShareShake}}" poiImage="{{renderData.poiInfo.topImageUrl}}" poiName="{{renderData.poiInfo.name}}" wx:if="{{canShare}}"></share-to-wechat>
    </view>
    <view catchtap="bindtapShowCommentPanel" class="comment-expose-wrapper" wx:if="{{renderData.subComments.length}}">
        <view class="comment-expose-text" decode="true" space="nbsp" wx:for="{{renderData.subComments}}" wx:for-index="subCommentIndex" wx:for-item="subComment" wx:key="id">
            <text class="comment-name">{{subComment.nickName+': '}}</text>
            <text>{{subComment.content}}</text>
        </view>
    </view>
    <view class="comment-expose-wrapper--placeholder" wx:else></view>
</view>
<comment-panel bindhidecommmentpanel="bindhidecommmentpanel" commentCount="{{renderData.commentInfo.subCommentCount}}" impressionId="{{renderData.commentId}}" reportData="{{renderData.reportData}}" shouldAutoFocus="{{shouldAutoFocusCommentPanel}}" wx:if="{{shouldShowCommentPanel}}"></comment-panel>
